{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if personal_info %}{{ personal_info.name }} - CV{% else %}CV{% endif %}</title>
    <link rel="stylesheet" href="{% static 'cv/style.css' %}">
</head>
<body>
    <div class="container">
        {% if personal_info %}
        <header>
            <h1>{{ personal_info.name }}</h1>
            <h2>{{ personal_info.title }}</h2>
            <div class="contact-info">
                <p>
                    <a href="mailto:{{ personal_info.email }}">{{ personal_info.email }}</a> |
                    {{ personal_info.phone }} |
                    {{ personal_info.location }}
                    {% if personal_info.linkedin %}
                    | <a href="{{ personal_info.linkedin }}" target="_blank">LinkedIn</a>
                    {% endif %}
                </p>
            </div>
        </header>

        <section class="summary">
            <h3>Professional Summary</h3>
            <p>{{ personal_info.summary }}</p>
        </section>
        {% endif %}

        {% if skills_by_category %}
        <section class="skills">
            <h3>Core Skills</h3>
            {% for category, skill_list in skills_by_category.items %}
            <div class="skill-category">
                <strong>{{ category }}:</strong> {{ skill_list|join:", " }}
            </div>
            {% endfor %}
        </section>
        {% endif %}

        {% if experiences %}
        <section class="experience">
            <h3>Professional Experience</h3>
            {% for exp in experiences %}
            <div class="job">
                <h4>{{ exp.position }}</h4>
                <p class="company">{{ exp.company }} | {{ exp.start_date }} - {{ exp.end_date }}</p>
                <p class="description">{{ exp.description|linebreaks }}</p>
            </div>
            {% endfor %}
        </section>
        {% endif %}

        {% if education %}
        <section class="education">
            <h3>Education</h3>
            {% for edu in education %}
            <div class="education-item">
                <h4>{{ edu.degree }}</h4>
                <p>{{ edu.institution }}, {{ edu.location }} ({{ edu.start_year }} - {{ edu.end_year }})</p>
            </div>
            {% endfor %}
        </section>
        {% endif %}

        {% if certifications %}
        <section class="certifications">
            <h3>Certifications</h3>
            <ul>
                {% for cert in certifications %}
                <li>{{ cert.name }}{% if cert.year %} ({{ cert.year }}){% endif %}</li>
                {% endfor %}
            </ul>
        </section>
        {% endif %}

        {% if not personal_info %}
        <div class="no-data">
            <h2>Welcome to Your CV Site!</h2>
            <p>Please log in to the <a href="/admin/">admin panel</a> to add your CV information.</p>
            <p>Default admin credentials need to be created. Run: <code>python manage.py createsuperuser</code></p>
        </div>
        {% endif %}
    </div>
</body>
</html>
